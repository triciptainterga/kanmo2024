var UseBootstrapTag=function(){"use strict";const h=[];function F(e){for(const t of e.dependencies)t.delete(e);e.dependencies.clear()}function P(e,t){t.add(e),e.dependencies.add(t)}function w(e){const t=new Set;function o(){const s=h[h.length-1];return s&&P(s,t),e}function u(s){e=s;for(const d of[...t])d.execute()}return[o,u]}function L(e){const t={execute(){F(t),h.push(t),e(),h.pop()},dependencies:new Set};t.execute()}function I(e,t){return e.length===t.length&&e.every((o,u)=>o===t[u])}function O(e,t){e.value=t,e.dispatchEvent(new Event("change"))}function q(e,t){const o=e.lastIndexOf(t);o!==-1&&e.splice(o,1)}function g(e,t){const o=document.createElement(e);return Object.assign(o,t)}function M(e,t){return typeof e=="string"?e.split(t):Array.isArray(e)?e.flatMap(o=>typeof o=="string"?o.split(t):[]):[]}const k="use-bootstrap-tag",S=`${k}-target`;function U(e){const t=e.nextElementSibling;t&&t.classList.contains(k)&&t.remove();const o=g("div");e.insertAdjacentElement("afterend",o);const u=e.dataset,s={separator:u.ubTagSeparator||",",variant:u.ubTagVariant||"secondary",xPosition:u.ubTagXPosition||"right",transform:u.ubTagTransform||"input => input",isDuplicate:u.ubTagDuplicate!==void 0,max:+u.ubTagMax>0?+u.ubTagMax:void 0,noInputOnblur:u.ubTagNoInputOnblur!==void 0},d=()=>o.querySelectorAll("button"),V=n=>{n.classList.add("duplicate"),setTimeout(()=>{n.classList.remove("duplicate")},150)},$=()=>e.value,m=()=>$().split(s.separator).filter(n=>n!==""),j=n=>{const a=m(),c=M(n,s.separator);if(!s.max||a.length<s.max){const r=[];!s.isDuplicate&&a.forEach((i,p)=>c.includes(i)&&r.push(p));const l=[];c.forEach(i=>{a.includes(i)?s.isDuplicate&&l.push(i):l.push(i)}),a.push(...l),I(m(),a)||(O(e,a.join(s.separator)),l.forEach(i=>{const p=d()[a.lastIndexOf(i)],K=p.offsetHeight;p.style.height=0,setTimeout(()=>p.style.height=`${K}px`,0),setTimeout(()=>p.style.removeProperty("height"),150)})),s.isDuplicate||r.forEach(i=>V(d()[i]))}else c.length>0&&d().forEach(V)},A=n=>{const a=m();M(n,s.separator).forEach(r=>q(a,r)),I(m(),a)||O(e,a.join(s.separator))},x=e.classList,N=e.disabled;e.tabIndex=-1,x.add(S);const[C,X]=w(e.value),[_,b]=w(!1),[f,T]=w(""),v=()=>C().split(s.separator).filter(n=>n.trim()!==""),z=()=>Function(`return ${s.transform}`)()(f().trim()),H=()=>v().length?"":e.placeholder;o.className=`${k} d-flex flex-wrap align-items-center gap-1 ${x.value}`.replace(S,""),L(()=>{_()?o.classList.add("focus"):o.classList.remove("focus")});const y=()=>{var n;return(n=o.querySelector("input"))==null?void 0:n.focus()},B=n=>{n>=0&&A(v()[n])},D=(n=!1)=>{const a=z();a===""&&T(""),(f().includes(s.separator)||n&&f()!=="")&&(j(a.split(s.separator).filter(c=>c.trim()!=="")),T(""))},E=g("button",{type:"button",className:`align-items-center gap-1 d-inline-flex py-0 border-0 btn btn-${s.variant}`,disabled:N});x.contains("form-control-sm")&&E.classList.add("btn-sm"),x.contains("form-control-lg")&&E.classList.add("btn-lg"),s.xPosition==="left"&&E.classList.add("flex-row-reverse");const G=g("span",{className:"d-inline-flex",role:"button",tabIndex:-1,innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>'}),J=n=>{d().forEach(a=>a.remove()),n.reverse().forEach((a,c)=>{const r=n.length-1-c,l=E.cloneNode();if(l.innerHTML=a,l.onfocus=()=>{l.classList.add("active"),b(!0)},l.onblur=()=>{l.classList.remove("active"),b(!1)},l.onkeydown=({key:i})=>{if(i==="Backspace"||i==="Delete"){B(r);const p=i==="Backspace"?r-1:v().length===r?-1:r;p===-1?y():d()[p].focus()}},!N){const i=G.cloneNode(!0);i.onclick=()=>{B(r),y()},l.append(i)}o.prepend(l)})};if(L(()=>{J(v())}),!N){const n=g("div",{className:"input-wrapper"}),a=g("span"),c=g("input",{type:"text"});c.onfocus=()=>{b(!0)},c.onblur=()=>{b(!1),s.noInputOnblur?T(""):D(!0)},c.onkeydown=r=>{f()===""&&r.key==="Backspace"&&B(v().length-1),f()!==""&&r.key==="Enter"&&(D(!0),r.preventDefault())},c.oninput=()=>{T(c.value),D()},L(()=>{a.innerHTML=f()||H()||"i",c.placeholder=H(),c.value=f()}),n.append(a,c),o.append(n)}return o.onclick=n=>{n.target.tagName!=="BUTTON"&&y()},e.addEventListener("change",()=>{X(e.value)}),e.addEventListener("focus",y),{getValue:$,getValues:m,addValue:j,removeValue:A}}return U}();
